<!DOCTYPE HTML>

<html>
  <head>
    <meta charset="utf-8">
    <title>map</title>


<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script type="text/JavaScript">
            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }
      </script>


<style>
body { margin:0; padding:0; }

#map { position:absolute; height:70%; width:2000px }
#container { height:100px; width:300px; }
</style>


<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
<!--We may not need this here anymore -->
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>


  <script>
src="http://code.jquery.com/jquery-latest.min.js"//need this to use jquery, accesses it online                          
                                                                                                                        
//var json = require('latlong.json');                                                                                    
    //uses JQuery to get JSON data from the file we wrote to in events.js. js is the object where the data is stored       var lat;
    var lng;
jQuery.getJSON("latlong.json", function(js) {                                                                                                                                                                                                
    console.log("JSON data received, data is: " + js);                                                              
    console.log("Lat received: " + js.lat);//access lat                                                              
    console.log("Long received: " + js.lon);//access lng                                                             
    lat = js.lat;
    lng = js.lng;
});
  </script>
     

<!--<script src="app.js"></script>
--> 
  <!-- defined above, this function will refresh page every 8 seconds. -->
<!--  <body onload="JavaScript:AutoRefresh(8000);">
  -->
 

<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicmNsb2NrZXIxMiIsImEiOiJjanBvdXB0N3IwN2QwNDJueGY2NTNrajc3In0.xws0wrpk49MH3P7izqtDpg';
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/streets-v9', // stylesheet location
    center: [-75.5994, 38.3607], // starting position [lng, lat]
    zoom: 14 // starting zoom
});


map.on("load", function () {
  /* Image: An image is loaded and added to the map. */
  map.loadImage("https://i.imgur.com/MK4NUzI.png", function(error, image) {
      if (error) throw error;
      map.addImage("custom-marker", image);
      /* Style layer: A style layer ties together the source and image and specifies how they are displayed on the map. */
      map.addLayer({
        id: "markers",
        type: "symbol",
        /* Source: A data source specifies the geographic coordinate where the image marker gets placed. */
        source: {
          type: "geojson",
          data: {
            type: "FeatureCollection",
            features:[{"type":"Feature","geometry":{"type":"Point","coordinates":["-75.5994","38.3607"]}}]}
        },
        layout: {
          "icon-image": "custom-marker",
        }
      });
    });
});

</script>
  </head>

  <body>

    </body>
<!--<script>//the below is basically the content of app.js 
 var json = require('latlong.json')
  
  $.getJSON("latlong.json", function(json) {
      document.write(json); // this will show the info it in firebug console
});</script>-->
 </body>
  </html>
